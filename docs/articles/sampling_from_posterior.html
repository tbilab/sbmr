<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sampling From Posterior • sbmR</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Sampling From Posterior">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">sbmR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/benchmarking.html">benchmarking</a>
    </li>
    <li>
      <a href="../articles/sampling_from_posterior.html">Sampling From Posterior</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="sampling_from_posterior_files/htmlwidgets-1.5.1/htmlwidgets.js"></script><script src="sampling_from_posterior_files/r2d3-render-0.1.0/r2d3-render.js"></script><script src="sampling_from_posterior_files/webcomponents-2.0.0/webcomponents.js"></script><script src="sampling_from_posterior_files/r2d3-binding-0.2.3/r2d3.js"></script><script src="sampling_from_posterior_files/d3v5-5.0.0/d3.min.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Sampling From Posterior</h1>
            
      
      
      <div class="hidden name"><code>sampling_from_posterior.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(sbmR)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(glue)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(tidyverse)</a></code></pre></div>
<p>In this document we will explore how to use the function <code><a href="../reference/mcmc_sweep.html">mcmc_sweep()</a></code> to sample from the posterior of a simulated network and investigate the results of doing so.</p>
<div id="setting-up-network-structure" class="section level2">
<h2 class="hasAnchor">
<a href="#setting-up-network-structure" class="anchor"></a>Setting up network structure</h2>
<p>First we will generate our simulated network. First we set a seed to make the structure reproducable and then we draw our random network using the <code><a href="../reference/sim_basic_block_network.html">sim_basic_block_network()</a></code> function to draw from a network with 3 groups and 40 nodes per group.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span>(<span class="dv">42</span>)</a>
<a class="sourceLine" id="cb2-2" data-line-number="2"></a>
<a class="sourceLine" id="cb2-3" data-line-number="3">group_info &lt;-<span class="st"> </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/reexports.html">tribble</a></span>(</a>
<a class="sourceLine" id="cb2-4" data-line-number="4">  <span class="op">~</span>group, <span class="op">~</span>n_nodes,</a>
<a class="sourceLine" id="cb2-5" data-line-number="5">     <span class="st">"a"</span>,       <span class="dv">20</span>,</a>
<a class="sourceLine" id="cb2-6" data-line-number="6">     <span class="st">"b"</span>,       <span class="dv">22</span>,</a>
<a class="sourceLine" id="cb2-7" data-line-number="7">     <span class="st">"c"</span>,       <span class="dv">25</span></a>
<a class="sourceLine" id="cb2-8" data-line-number="8">)</a>
<a class="sourceLine" id="cb2-9" data-line-number="9"></a>
<a class="sourceLine" id="cb2-10" data-line-number="10">connection_propensities &lt;-<span class="st"> </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/reexports.html">tribble</a></span>(</a>
<a class="sourceLine" id="cb2-11" data-line-number="11"> <span class="op">~</span>group_<span class="dv">1</span>, <span class="op">~</span>group_<span class="dv">2</span>, <span class="op">~</span>propensity,</a>
<a class="sourceLine" id="cb2-12" data-line-number="12">      <span class="st">"a"</span>,      <span class="st">"a"</span>,         <span class="fl">0.8</span>,</a>
<a class="sourceLine" id="cb2-13" data-line-number="13">      <span class="st">"a"</span>,      <span class="st">"b"</span>,         <span class="fl">0.2</span>,</a>
<a class="sourceLine" id="cb2-14" data-line-number="14">      <span class="st">"a"</span>,      <span class="st">"c"</span>,         <span class="fl">0.3</span>,</a>
<a class="sourceLine" id="cb2-15" data-line-number="15">      <span class="st">"b"</span>,      <span class="st">"b"</span>,         <span class="fl">0.9</span>,</a>
<a class="sourceLine" id="cb2-16" data-line-number="16">      <span class="st">"b"</span>,      <span class="st">"c"</span>,         <span class="fl">0.15</span>,</a>
<a class="sourceLine" id="cb2-17" data-line-number="17">      <span class="st">"c"</span>,      <span class="st">"c"</span>,         <span class="fl">0.4</span>,</a>
<a class="sourceLine" id="cb2-18" data-line-number="18">)</a>
<a class="sourceLine" id="cb2-19" data-line-number="19"></a>
<a class="sourceLine" id="cb2-20" data-line-number="20">network &lt;-<span class="st"> </span><span class="kw"><a href="../reference/sim_sbm_network.html">sim_sbm_network</a></span>(group_info, connection_propensities, <span class="dt">edge_dist =</span> purrr<span class="op">::</span>rbernoulli)</a></code></pre></div>
<p>First we can make sure our connection propensities look reasonable</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">connection_propensities <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> group_<span class="dv">1</span>, <span class="dt">y =</span> group_<span class="dv">2</span>, <span class="dt">fill =</span> propensity)) <span class="op">+</span></a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="st">  </span><span class="kw">geom_tile</span>(<span class="dt">color =</span> <span class="st">'white'</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb3-4" data-line-number="4"><span class="st">  </span><span class="kw">theme_bw</span>()</a></code></pre></div>
<p><img src="sampling_from_posterior_files/figure-html/unnamed-chunk-4-1.png" width="672"></p>
<p>Next, we can visualize the actual drawn network.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="kw"><a href="../reference/visualize_network.html">visualize_network</a></span>(network, <span class="dt">width =</span> <span class="st">'100%'</span>)</a></code></pre></div>
<div id="htmlwidget-e538c1224ac588fb7a02" style="width:100%;height:432.632880098888px;" class="r2d3 html-widget"></div>
<script type="application/json" data-for="htmlwidget-e538c1224ac588fb7a02">{"x":{"data":{"nodes":{"id":["a_1","a_2","a_3","a_4","a_5","a_6","a_7","a_8","a_9","a_10","a_11","a_12","a_13","a_14","a_15","a_16","a_17","a_18","a_19","a_20","b_1","b_2","b_3","b_4","b_5","b_6","b_7","b_8","b_9","b_10","b_11","b_12","b_13","b_14","b_15","b_16","b_17","b_18","b_19","b_20","b_21","b_22","c_1","c_2","c_3","c_4","c_5","c_6","c_7","c_8","c_9","c_10","c_11","c_12","c_13","c_14","c_15","c_16","c_17","c_18","c_19","c_20","c_21","c_22","c_23","c_24","c_25"],"group":["a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","b","b","b","b","b","b","b","b","b","b","b","b","b","b","b","b","b","b","b","b","b","b","c","c","c","c","c","c","c","c","c","c","c","c","c","c","c","c","c","c","c","c","c","c","c","c","c"]},"edges":{"from":["a_1","a_1","a_1","a_1","a_1","a_1","a_1","a_1","a_1","a_1","a_1","a_1","a_1","a_1","a_1","a_1","a_1","a_1","a_1","a_1","a_1","a_1","a_1","a_1","a_1","a_1","a_1","a_1","a_1","a_1","a_1","a_1","a_1","a_1","a_2","a_2","a_2","a_2","a_2","a_2","a_2","a_2","a_2","a_2","a_2","a_2","a_2","a_2","a_2","a_2","a_2","a_2","a_2","a_2","a_2","a_2","a_2","a_2","a_2","a_2","a_3","a_3","a_3","a_3","a_3","a_3","a_3","a_3","a_3","a_3","a_3","a_3","a_3","a_3","a_3","a_3","a_3","a_3","a_3","a_3","a_3","a_3","a_3","a_3","a_3","a_4","a_4","a_4","a_4","a_4","a_4","a_4","a_4","a_4","a_4","a_4","a_4","a_4","a_4","a_4","a_4","a_4","a_4","a_4","a_4","a_4","a_4","a_5","a_5","a_5","a_5","a_5","a_5","a_5","a_5","a_5","a_5","a_5","a_5","a_5","a_5","a_5","a_5","a_5","a_5","a_5","a_5","a_5","a_5","a_6","a_6","a_6","a_6","a_6","a_6","a_6","a_6","a_6","a_6","a_6","a_6","a_6","a_6","a_6","a_6","a_6","a_6","a_6","a_6","a_6","a_6","a_7","a_7","a_7","a_7","a_7","a_7","a_7","a_7","a_7","a_7","a_7","a_7","a_7","a_7","a_7","a_7","a_7","a_7","a_8","a_8","a_8","a_8","a_8","a_8","a_8","a_8","a_8","a_8","a_8","a_8","a_8","a_8","a_8","a_8","a_8","a_8","a_8","a_8","a_8","a_8","a_8","a_8","a_9","a_9","a_9","a_9","a_9","a_9","a_9","a_9","a_9","a_9","a_9","a_9","a_9","a_9","a_9","a_9","a_10","a_10","a_10","a_10","a_10","a_10","a_10","a_10","a_10","a_10","a_10","a_10","a_10","a_10","a_10","a_10","a_10","a_10","a_11","a_11","a_11","a_11","a_11","a_11","a_11","a_11","a_11","a_11","a_11","a_11","a_11","a_11","a_11","a_11","a_11","a_11","a_11","a_12","a_12","a_12","a_12","a_12","a_12","a_12","a_12","a_12","a_12","a_12","a_12","a_12","a_12","a_12","a_12","a_12","a_12","a_12","a_12","a_12","a_13","a_13","a_13","a_13","a_13","a_13","a_13","a_13","a_13","a_13","a_13","a_13","a_13","a_13","a_13","a_13","a_13","a_13","a_13","a_13","a_13","a_13","a_13","a_14","a_14","a_14","a_14","a_14","a_14","a_14","a_14","a_14","a_14","a_14","a_14","a_15","a_15","a_15","a_15","a_15","a_15","a_15","a_15","a_15","a_15","a_15","a_15","a_15","a_15","a_15","a_15","a_15","a_15","a_15","a_15","a_16","a_16","a_16","a_16","a_16","a_16","a_16","a_16","a_16","a_16","a_16","a_16","a_16","a_16","a_16","a_16","a_16","a_17","a_17","a_17","a_17","a_17","a_17","a_17","a_17","a_18","a_18","a_18","a_18","a_18","a_18","a_18","a_18","a_18","a_18","a_18","a_18","a_18","a_19","a_19","a_19","a_19","a_19","a_19","a_19","a_19","a_19","a_19","a_19","a_19","a_20","a_20","a_20","a_20","a_20","a_20","a_20","a_20","a_20","a_20","a_20","a_20","a_20","a_20","a_20","a_20","b_1","b_1","b_1","b_1","b_1","b_1","b_1","b_1","b_1","b_1","b_1","b_1","b_1","b_1","b_1","b_1","b_1","b_1","b_1","b_1","b_1","b_2","b_2","b_2","b_2","b_2","b_2","b_2","b_2","b_2","b_2","b_2","b_2","b_2","b_2","b_2","b_2","b_2","b_2","b_2","b_2","b_2","b_2","b_3","b_3","b_3","b_3","b_3","b_3","b_3","b_3","b_3","b_3","b_3","b_3","b_3","b_3","b_3","b_3","b_3","b_3","b_3","b_3","b_4","b_4","b_4","b_4","b_4","b_4","b_4","b_4","b_4","b_4","b_4","b_4","b_4","b_4","b_4","b_4","b_4","b_4","b_4","b_4","b_4","b_5","b_5","b_5","b_5","b_5","b_5","b_5","b_5","b_5","b_5","b_5","b_5","b_5","b_5","b_5","b_5","b_5","b_5","b_5","b_6","b_6","b_6","b_6","b_6","b_6","b_6","b_6","b_6","b_6","b_6","b_6","b_6","b_6","b_6","b_6","b_6","b_7","b_7","b_7","b_7","b_7","b_7","b_7","b_7","b_7","b_7","b_7","b_7","b_7","b_7","b_7","b_8","b_8","b_8","b_8","b_8","b_8","b_8","b_8","b_8","b_8","b_8","b_8","b_8","b_8","b_8","b_8","b_8","b_8","b_9","b_9","b_9","b_9","b_9","b_9","b_9","b_9","b_9","b_9","b_9","b_9","b_9","b_9","b_9","b_9","b_10","b_10","b_10","b_10","b_10","b_10","b_10","b_10","b_10","b_10","b_10","b_10","b_10","b_11","b_11","b_11","b_11","b_11","b_11","b_11","b_11","b_11","b_11","b_11","b_11","b_11","b_11","b_11","b_12","b_12","b_12","b_12","b_12","b_12","b_12","b_12","b_12","b_12","b_12","b_12","b_13","b_13","b_13","b_13","b_13","b_13","b_13","b_13","b_13","b_13","b_13","b_14","b_14","b_14","b_14","b_14","b_14","b_14","b_14","b_14","b_15","b_15","b_15","b_15","b_15","b_15","b_15","b_15","b_15","b_16","b_16","b_16","b_16","b_16","b_16","b_16","b_17","b_17","b_17","b_17","b_17","b_17","b_17","b_17","b_17","b_17","b_17","b_18","b_18","b_18","b_18","b_18","b_18","b_18","b_18","b_18","b_19","b_19","b_19","b_19","b_19","b_19","b_19","b_20","b_20","b_20","b_20","b_20","b_20","b_20","b_21","b_21","b_21","b_21","b_22","b_22","b_22","b_22","b_22","c_1","c_1","c_1","c_1","c_1","c_1","c_1","c_1","c_1","c_1","c_1","c_1","c_1","c_2","c_2","c_2","c_2","c_2","c_2","c_2","c_2","c_2","c_2","c_2","c_3","c_3","c_3","c_3","c_3","c_3","c_3","c_3","c_3","c_3","c_4","c_4","c_4","c_4","c_4","c_4","c_4","c_4","c_4","c_4","c_4","c_5","c_5","c_5","c_5","c_5","c_5","c_5","c_5","c_5","c_5","c_5","c_6","c_6","c_6","c_6","c_7","c_7","c_7","c_7","c_7","c_7","c_7","c_7","c_7","c_7","c_7","c_8","c_8","c_8","c_8","c_8","c_8","c_9","c_9","c_9","c_9","c_10","c_10","c_10","c_10","c_10","c_11","c_11","c_11","c_11","c_11","c_11","c_11","c_11","c_11","c_11","c_12","c_12","c_13","c_13","c_13","c_13","c_13","c_13","c_13","c_14","c_14","c_14","c_14","c_14","c_14","c_15","c_15","c_15","c_15","c_16","c_16","c_17","c_17","c_18","c_18","c_18","c_18","c_19","c_19","c_19","c_19","c_20","c_21","c_22","c_23","c_24"],"to":["a_2","a_3","a_4","a_5","a_6","a_7","a_8","a_10","a_11","a_12","a_13","a_14","a_15","a_16","a_17","a_18","a_20","b_2","b_4","b_5","b_9","b_11","b_13","b_17","b_20","c_3","c_5","c_6","c_8","c_13","c_15","c_21","c_22","c_24","a_3","a_4","a_5","a_6","a_9","a_10","a_12","a_14","a_15","a_17","a_19","a_20","b_10","b_11","b_21","b_22","c_1","c_2","c_6","c_7","c_14","c_19","c_21","c_22","c_24","c_25","a_4","a_5","a_6","a_7","a_8","a_9","a_11","a_12","a_15","a_16","a_17","a_18","a_20","b_13","c_1","c_7","c_9","c_10","c_11","c_12","c_15","c_16","c_17","c_18","c_22","a_6","a_8","a_9","a_10","a_11","a_12","a_13","a_15","a_16","a_17","a_18","a_19","a_20","b_5","b_9","b_13","b_15","c_2","c_3","c_5","c_17","c_23","a_6","a_7","a_8","a_10","a_11","a_12","a_14","a_15","a_16","a_17","a_19","a_20","b_2","b_11","b_18","c_2","c_10","c_11","c_17","c_21","c_24","c_25","a_7","a_8","a_10","a_11","a_12","a_13","a_14","a_15","a_16","a_17","a_20","b_5","b_13","b_15","b_16","c_2","c_8","c_12","c_17","c_19","c_20","c_24","a_8","a_9","a_10","a_11","a_12","a_14","a_17","a_18","a_19","a_20","b_3","b_4","b_11","b_13","c_2","c_7","c_8","c_19","a_9","a_10","a_11","a_12","a_13","a_15","a_16","a_18","a_19","a_20","b_6","b_7","b_10","b_17","b_20","b_21","c_3","c_5","c_8","c_10","c_12","c_16","c_18","c_22","a_12","a_13","a_15","a_16","a_18","a_19","b_10","b_11","b_12","b_17","b_20","c_8","c_9","c_13","c_18","c_24","a_11","a_12","a_13","a_14","a_17","a_18","a_19","a_20","b_5","b_14","b_19","b_20","c_2","c_4","c_5","c_13","c_17","c_25","a_12","a_14","a_15","a_16","a_17","a_18","a_19","a_20","b_15","b_20","c_3","c_4","c_6","c_7","c_15","c_16","c_18","c_20","c_23","a_13","a_15","a_18","a_19","a_20","b_3","b_5","b_7","b_14","b_15","b_19","b_20","c_3","c_4","c_5","c_10","c_11","c_13","c_14","c_15","c_25","a_14","a_15","a_16","a_17","a_18","a_19","a_20","b_1","b_7","b_8","b_11","b_12","b_16","c_4","c_5","c_6","c_7","c_12","c_20","c_22","c_23","c_24","c_25","a_15","a_16","a_17","a_19","b_5","b_13","b_15","b_16","c_4","c_7","c_9","c_18","a_16","a_17","a_18","a_19","a_20","b_1","b_4","b_11","b_20","b_22","c_1","c_6","c_11","c_12","c_14","c_19","c_21","c_22","c_24","c_25","a_20","b_1","b_7","b_17","c_2","c_3","c_4","c_5","c_6","c_10","c_11","c_12","c_15","c_21","c_22","c_23","c_24","a_19","a_20","b_19","c_3","c_5","c_8","c_18","c_23","a_19","b_2","b_5","b_6","b_13","b_15","b_22","c_6","c_9","c_11","c_19","c_20","c_21","a_20","b_1","b_5","b_12","b_13","b_15","b_20","c_4","c_9","c_16","c_19","c_24","b_4","b_8","b_16","c_2","c_4","c_5","c_8","c_9","c_12","c_13","c_15","c_16","c_17","c_20","c_21","c_23","b_3","b_4","b_6","b_7","b_8","b_10","b_11","b_12","b_13","b_14","b_15","b_16","b_17","b_19","b_20","b_21","b_22","c_2","c_5","c_22","c_23","b_3","b_4","b_5","b_6","b_7","b_8","b_9","b_10","b_11","b_12","b_13","b_14","b_15","b_16","b_17","b_18","b_19","b_21","b_22","c_10","c_15","c_16","b_4","b_5","b_6","b_7","b_8","b_9","b_10","b_11","b_12","b_13","b_15","b_16","b_17","b_18","b_19","b_20","b_21","b_22","c_4","c_20","b_5","b_6","b_7","b_8","b_9","b_10","b_11","b_12","b_13","b_14","b_15","b_16","b_17","b_18","b_19","b_20","b_21","b_22","c_19","c_23","c_25","b_6","b_7","b_9","b_10","b_11","b_12","b_13","b_15","b_16","b_17","b_18","b_19","b_20","b_21","b_22","c_4","c_8","c_9","c_21","b_7","b_8","b_9","b_10","b_11","b_13","b_14","b_15","b_16","b_17","b_18","b_20","b_21","b_22","c_3","c_14","c_16","b_8","b_9","b_10","b_12","b_13","b_15","b_16","b_17","b_19","b_20","b_21","b_22","c_17","c_20","c_24","b_9","b_10","b_11","b_12","b_13","b_14","b_15","b_16","b_17","b_18","b_19","b_20","b_21","b_22","c_3","c_5","c_6","c_11","b_10","b_11","b_12","b_13","b_14","b_15","b_16","b_17","b_18","b_19","b_20","b_21","b_22","c_5","c_19","c_21","b_12","b_13","b_15","b_16","b_17","b_18","b_19","b_20","b_21","b_22","c_12","c_16","c_21","b_12","b_13","b_14","b_15","b_16","b_17","b_18","b_19","b_20","b_21","b_22","c_6","c_12","c_16","c_23","b_13","b_14","b_15","b_16","b_17","b_18","b_19","b_20","b_21","b_22","c_17","c_23","b_14","b_15","b_16","b_17","b_18","b_19","b_20","b_22","c_14","c_15","c_23","b_15","b_17","b_18","b_20","b_21","b_22","c_2","c_4","c_22","b_16","b_17","b_18","b_19","b_20","b_21","b_22","c_4","c_24","b_18","b_19","b_20","b_21","b_22","c_12","c_18","b_18","b_19","b_20","b_21","b_22","c_4","c_12","c_14","c_15","c_19","c_20","b_19","b_20","b_21","b_22","c_3","c_13","c_17","c_19","c_24","b_20","b_21","b_22","c_1","c_12","c_17","c_21","b_21","b_22","c_5","c_6","c_9","c_19","c_23","b_22","c_1","c_9","c_24","c_11","c_15","c_17","c_20","c_24","c_3","c_5","c_7","c_8","c_9","c_11","c_12","c_16","c_18","c_19","c_21","c_23","c_24","c_5","c_6","c_12","c_14","c_16","c_18","c_19","c_20","c_21","c_22","c_25","c_6","c_9","c_10","c_13","c_16","c_20","c_22","c_23","c_24","c_25","c_5","c_11","c_12","c_13","c_14","c_15","c_16","c_18","c_19","c_24","c_25","c_7","c_8","c_9","c_10","c_11","c_12","c_18","c_20","c_22","c_23","c_24","c_10","c_11","c_14","c_15","c_8","c_11","c_12","c_13","c_14","c_18","c_19","c_21","c_22","c_23","c_25","c_11","c_15","c_16","c_20","c_22","c_23","c_12","c_18","c_23","c_25","c_11","c_15","c_18","c_22","c_23","c_12","c_13","c_14","c_16","c_17","c_18","c_19","c_20","c_21","c_24","c_16","c_18","c_14","c_16","c_17","c_18","c_21","c_22","c_23","c_15","c_17","c_18","c_20","c_21","c_25","c_19","c_20","c_21","c_23","c_18","c_24","c_21","c_24","c_19","c_21","c_24","c_25","c_20","c_22","c_23","c_24","c_23","c_22","c_23","c_24","c_25"],"connections":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},"type":"list","container":"svg","options":{"color_col":"group","shape_col":"type"},"script":"var d3Script = function(d3, r2d3, data, svg, width, height, options, theme, console) {\nthis.d3 = d3;\n\nsvg = d3.select(svg.node());\n/* R2D3 Source File:  /private/var/folders/d4/cbr0wtz50gb69vd8pqt65w0m0000gn/T/Rtmp9o7Zlz/temp_libpath1497522f3e178/sbmR/d3/network_viz.js */\n// !preview r2d3 data=sim_basic_block_network(3, 20), options = list(color_col = 'group', shape_col = 'type')\nsvg.attr(\"viewBox\", [0, 0, width, height]);\n\n// Get color and shape column names from options\nconst {color_col, shape_col} = options;\n\n// Clean up data into the node and link format that d3 needs\nconst links = HTMLWidgets.dataframeToD3(data.edges)\n  .map(function(edge){return({source: edge.from, target: edge.to})});\nconst nodes = HTMLWidgets.dataframeToD3(data.nodes);\n\n\n// If we're missing values for our aesthetic mapping columns,  fill them in with constant values.\nif(!nodes[0][color_col]){\n  nodes.forEach(function(node){node[color_col] = color_col});\n}\nif(!nodes[0][shape_col]){\n  nodes.forEach(function(node){node[shape_col] = shape_col});\n}\n\n// Color encodes the node's group\nconst Color = d3.scaleOrdinal(d3.schemeCategory10, unique(nodes.map(d => d[color_col])));\nconst color_node = node => Color(node[color_col]);\n\n// Shape encodes the node's type\nconst Shape = d3.scaleOrdinal()\n  .range(d3.symbols)\n  .domain(unique(nodes.map(d => d[shape_col])));\nconst draw_shape = node => d3.symbol().size(150)\n  .type(Shape(node[shape_col]))();\n\n\nconst padding = 15;\nconst X = d3.scaleLinear()\n  .range([padding, width-padding]);\n\nconst Y = d3.scaleLinear()\n  .range([padding, height-padding]);\n\n// Setup the simulation\nconst simulation = d3.forceSimulation(nodes)\n      .force(\"link\", d3.forceLink(links).id(d => d.id))\n      .force(\"charge\", d3.forceManyBody())\n      .force(\"center\", d3.forceCenter(width / 2, height / 2));\n\nlet not_being_dragged = true;\n\n// Setup the node and link visual components\nconst link = svg.append(\"g\")\n  .attr(\"stroke\", \"#999\")\n  .attr(\"stroke-opacity\", 0.6)\n  .selectAll(\"line\")\n  .data(links)\n  .enter().append(\"line\")\n  .attr(\"stroke-width\", 1);\n\nconst node = svg.append(\"g\")\n  .attr(\"stroke\", \"#fff\")\n  .selectAll(\"path.node\")\n  .data(nodes)\n  .enter().append('path')\n  .classed('node', true)\n  .attr('fill', color_node)\n  .attr('d', draw_shape)\n  .call(drag(simulation));\n\n// Kickoff simulation\nsimulation.on(\"tick\", () => {\n\n if(not_being_dragged){\n   X.domain(d3.extent(nodes.map(d => d.x)));\n   Y.domain(d3.extent(nodes.map(d => d.y)));\n }\n\n\n  link\n    .attr(\"x1\", d => X(d.source.x))\n    .attr(\"x2\", d => X(d.target.x))\n    .attr(\"y1\", d => Y(d.source.y))\n    .attr(\"y2\", d => Y(d.target.y));\n\n  node.attr('transform', d => `translate(${X(d.x)}, ${Y(d.y)})`);\n});\n\n\nfunction drag(simulation){\n  function dragstarted(d) {\n    if (!d3.event.active) simulation.alphaTarget(0.3).restart();\n    d.fx = d.x;\n    d.fy = d.y;\n    not_being_dragged = false;\n  }\n\n  function dragged(d) {\n    d.fx = d3.event.x;\n    d.fy = d3.event.y;\n  }\n\n  function dragended(d) {\n    if (!d3.event.active) simulation.alphaTarget(0);\n    d.fx = null;\n    d.fy = null;\n    not_being_dragged = true;\n  }\n\n  return d3.drag()\n      .on(\"start\", dragstarted)\n      .on(\"drag\", dragged)\n      .on(\"end\", dragended);\n}\n\n\nfunction unique (vals){\n  return [...new Set(vals)];\n}\n\n\n};","style":null,"version":5,"theme":{"default":{"background":"#FFFFFF","foreground":"#000000"},"runtime":null},"useShadow":true},"evals":[],"jsHooks":[]}</script><p>We can see a decent amount of separation with perhaps more cohesion between the green and blue nodes than the orange</p>
</div>
<div id="setting-up-sbm" class="section level2">
<h2 class="hasAnchor">
<a href="#setting-up-sbm" class="anchor"></a>Setting up SBM</h2>
<p>Now that we have our data we can load it into an SBM object and look at the first few nodes worth of summary</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">my_sbm &lt;-<span class="st"> </span><span class="kw"><a href="../reference/create_sbm.html">create_sbm</a></span>(network)</a>
<a class="sourceLine" id="cb5-2" data-line-number="2"></a>
<a class="sourceLine" id="cb5-3" data-line-number="3">my_sbm <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="../reference/get_state.html">get_state</a></span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/utils/head.html">head</a></span>()</a>
<a class="sourceLine" id="cb5-4" data-line-number="4"><span class="co">#&gt;     id parent type level</span></a>
<a class="sourceLine" id="cb5-5" data-line-number="5"><span class="co">#&gt; 1  a_1   none node     0</span></a>
<a class="sourceLine" id="cb5-6" data-line-number="6"><span class="co">#&gt; 2 a_10   none node     0</span></a>
<a class="sourceLine" id="cb5-7" data-line-number="7"><span class="co">#&gt; 3 a_11   none node     0</span></a>
<a class="sourceLine" id="cb5-8" data-line-number="8"><span class="co">#&gt; 4 a_12   none node     0</span></a>
<a class="sourceLine" id="cb5-9" data-line-number="9"><span class="co">#&gt; 5 a_13   none node     0</span></a>
<a class="sourceLine" id="cb5-10" data-line-number="10"><span class="co">#&gt; 6 a_14   none node     0</span></a></code></pre></div>
<div id="initializing-the-chain-location" class="section level3">
<h3 class="hasAnchor">
<a href="#initializing-the-chain-location" class="anchor"></a>Initializing the chain location</h3>
<p>In an attempt to set our initial chain location to an optimal position we will agglomeratively merge the network using the collapse groups function. This will return a list of results for different model sizes.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1">collapse_results &lt;-<span class="st"> </span>my_sbm <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb6-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/collapse_groups.html">collapse_groups</a></span>(<span class="dt">exhaustive =</span> <span class="ot">TRUE</span>, <span class="dt">num_group_proposals =</span> <span class="dv">8</span>, <span class="dt">num_mcmc_sweeps =</span> <span class="dv">25</span>)</a></code></pre></div>
<p>Let’s look at the collapse results in terms of number of groups and the size of the network…</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="kw">ggplot</span>(collapse_results, <span class="kw">aes</span>(<span class="dt">x =</span> num_groups, <span class="dt">y =</span> entropy)) <span class="op">+</span></a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_line</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb7-3" data-line-number="3"><span class="st">  </span><span class="kw">scale_x_log10</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb7-4" data-line-number="4"><span class="st">  </span><span class="kw">geom_vline</span>(<span class="dt">xintercept =</span> <span class="dv">3</span>, <span class="dt">color =</span> <span class="st">'orangered'</span>)</a>
<a class="sourceLine" id="cb7-5" data-line-number="5"><span class="co">#&gt; geom_path: Each group consists of only one observation. Do you need to adjust</span></a>
<a class="sourceLine" id="cb7-6" data-line-number="6"><span class="co">#&gt; the group aesthetic?</span></a></code></pre></div>
<p><img src="sampling_from_posterior_files/figure-html/unnamed-chunk-8-1.png" width="672"></p>
<p>So even though we know our true number of groups is <code>3</code> we see a minimum entropy at 1 so we will start our chain there. To do this we will use the helper function <code><a href="../reference/choose_best_collapse_state.html">choose_best_collapse_state()</a></code> which will scan through the results and find the optimal partitioning based upon the designated hueristic. Right now it is just choosing the lowest value. (In the future more complicated methods will be allowed.)</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1">my_sbm &lt;-<span class="st"> </span>my_sbm <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="../reference/choose_best_collapse_state.html">choose_best_collapse_state</a></span>(collapse_results, <span class="dt">heuristic =</span> <span class="st">'lowest'</span>)</a></code></pre></div>
</div>
<div id="visualizing-these-results--we-can-use-our-visualization-function-to-look-at-the-results-of-this-clustering-and-compare-that-to-the-known-structure" class="section level3">
<h3 class="hasAnchor">
<a href="#visualizing-these-results--we-can-use-our-visualization-function-to-look-at-the-results-of-this-clustering-and-compare-that-to-the-known-structure" class="anchor"></a>Visualizing these results. We can use our visualization function to look at the results of this clustering and compare that to the known structure…</h3>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1">merged_state &lt;-<span class="st"> </span>my_sbm <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb9-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/get_state.html">get_state</a></span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb9-3" data-line-number="3"><span class="st">  </span><span class="kw">select</span>(id, parent)</a>
<a class="sourceLine" id="cb9-4" data-line-number="4"></a>
<a class="sourceLine" id="cb9-5" data-line-number="5">nodes_w_inferred_group &lt;-<span class="st"> </span>network<span class="op">$</span>nodes  <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb9-6" data-line-number="6"><span class="st">  </span><span class="kw">left_join</span>(merged_state, <span class="dt">by =</span> <span class="st">'id'</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb9-7" data-line-number="7"><span class="st">  </span><span class="kw">rename</span>(<span class="dt">inferred =</span> parent)</a>
<a class="sourceLine" id="cb9-8" data-line-number="8"></a>
<a class="sourceLine" id="cb9-9" data-line-number="9"><span class="kw"><a href="../reference/visualize_network.html">visualize_network</a></span>(<span class="dt">edges =</span> network<span class="op">$</span>edges, </a>
<a class="sourceLine" id="cb9-10" data-line-number="10">                  <span class="dt">nodes =</span> nodes_w_inferred_group, </a>
<a class="sourceLine" id="cb9-11" data-line-number="11">                  <span class="dt">node_color_col =</span> <span class="st">'group'</span>, </a>
<a class="sourceLine" id="cb9-12" data-line-number="12">                  <span class="dt">node_shape_col =</span> <span class="st">'inferred'</span>,</a>
<a class="sourceLine" id="cb9-13" data-line-number="13">                  <span class="dt">width =</span> <span class="st">'100%'</span>)</a></code></pre></div>
<div id="htmlwidget-f3fe5676f91f2139497d" style="width:100%;height:432.632880098888px;" class="r2d3 html-widget"></div>
<script type="application/json" data-for="htmlwidget-f3fe5676f91f2139497d">{"x":{"data":{"edges":{"from":["a_1","a_1","a_1","a_1","a_1","a_1","a_1","a_1","a_1","a_1","a_1","a_1","a_1","a_1","a_1","a_1","a_1","a_1","a_1","a_1","a_1","a_1","a_1","a_1","a_1","a_1","a_1","a_1","a_1","a_1","a_1","a_1","a_1","a_1","a_2","a_2","a_2","a_2","a_2","a_2","a_2","a_2","a_2","a_2","a_2","a_2","a_2","a_2","a_2","a_2","a_2","a_2","a_2","a_2","a_2","a_2","a_2","a_2","a_2","a_2","a_3","a_3","a_3","a_3","a_3","a_3","a_3","a_3","a_3","a_3","a_3","a_3","a_3","a_3","a_3","a_3","a_3","a_3","a_3","a_3","a_3","a_3","a_3","a_3","a_3","a_4","a_4","a_4","a_4","a_4","a_4","a_4","a_4","a_4","a_4","a_4","a_4","a_4","a_4","a_4","a_4","a_4","a_4","a_4","a_4","a_4","a_4","a_5","a_5","a_5","a_5","a_5","a_5","a_5","a_5","a_5","a_5","a_5","a_5","a_5","a_5","a_5","a_5","a_5","a_5","a_5","a_5","a_5","a_5","a_6","a_6","a_6","a_6","a_6","a_6","a_6","a_6","a_6","a_6","a_6","a_6","a_6","a_6","a_6","a_6","a_6","a_6","a_6","a_6","a_6","a_6","a_7","a_7","a_7","a_7","a_7","a_7","a_7","a_7","a_7","a_7","a_7","a_7","a_7","a_7","a_7","a_7","a_7","a_7","a_8","a_8","a_8","a_8","a_8","a_8","a_8","a_8","a_8","a_8","a_8","a_8","a_8","a_8","a_8","a_8","a_8","a_8","a_8","a_8","a_8","a_8","a_8","a_8","a_9","a_9","a_9","a_9","a_9","a_9","a_9","a_9","a_9","a_9","a_9","a_9","a_9","a_9","a_9","a_9","a_10","a_10","a_10","a_10","a_10","a_10","a_10","a_10","a_10","a_10","a_10","a_10","a_10","a_10","a_10","a_10","a_10","a_10","a_11","a_11","a_11","a_11","a_11","a_11","a_11","a_11","a_11","a_11","a_11","a_11","a_11","a_11","a_11","a_11","a_11","a_11","a_11","a_12","a_12","a_12","a_12","a_12","a_12","a_12","a_12","a_12","a_12","a_12","a_12","a_12","a_12","a_12","a_12","a_12","a_12","a_12","a_12","a_12","a_13","a_13","a_13","a_13","a_13","a_13","a_13","a_13","a_13","a_13","a_13","a_13","a_13","a_13","a_13","a_13","a_13","a_13","a_13","a_13","a_13","a_13","a_13","a_14","a_14","a_14","a_14","a_14","a_14","a_14","a_14","a_14","a_14","a_14","a_14","a_15","a_15","a_15","a_15","a_15","a_15","a_15","a_15","a_15","a_15","a_15","a_15","a_15","a_15","a_15","a_15","a_15","a_15","a_15","a_15","a_16","a_16","a_16","a_16","a_16","a_16","a_16","a_16","a_16","a_16","a_16","a_16","a_16","a_16","a_16","a_16","a_16","a_17","a_17","a_17","a_17","a_17","a_17","a_17","a_17","a_18","a_18","a_18","a_18","a_18","a_18","a_18","a_18","a_18","a_18","a_18","a_18","a_18","a_19","a_19","a_19","a_19","a_19","a_19","a_19","a_19","a_19","a_19","a_19","a_19","a_20","a_20","a_20","a_20","a_20","a_20","a_20","a_20","a_20","a_20","a_20","a_20","a_20","a_20","a_20","a_20","b_1","b_1","b_1","b_1","b_1","b_1","b_1","b_1","b_1","b_1","b_1","b_1","b_1","b_1","b_1","b_1","b_1","b_1","b_1","b_1","b_1","b_2","b_2","b_2","b_2","b_2","b_2","b_2","b_2","b_2","b_2","b_2","b_2","b_2","b_2","b_2","b_2","b_2","b_2","b_2","b_2","b_2","b_2","b_3","b_3","b_3","b_3","b_3","b_3","b_3","b_3","b_3","b_3","b_3","b_3","b_3","b_3","b_3","b_3","b_3","b_3","b_3","b_3","b_4","b_4","b_4","b_4","b_4","b_4","b_4","b_4","b_4","b_4","b_4","b_4","b_4","b_4","b_4","b_4","b_4","b_4","b_4","b_4","b_4","b_5","b_5","b_5","b_5","b_5","b_5","b_5","b_5","b_5","b_5","b_5","b_5","b_5","b_5","b_5","b_5","b_5","b_5","b_5","b_6","b_6","b_6","b_6","b_6","b_6","b_6","b_6","b_6","b_6","b_6","b_6","b_6","b_6","b_6","b_6","b_6","b_7","b_7","b_7","b_7","b_7","b_7","b_7","b_7","b_7","b_7","b_7","b_7","b_7","b_7","b_7","b_8","b_8","b_8","b_8","b_8","b_8","b_8","b_8","b_8","b_8","b_8","b_8","b_8","b_8","b_8","b_8","b_8","b_8","b_9","b_9","b_9","b_9","b_9","b_9","b_9","b_9","b_9","b_9","b_9","b_9","b_9","b_9","b_9","b_9","b_10","b_10","b_10","b_10","b_10","b_10","b_10","b_10","b_10","b_10","b_10","b_10","b_10","b_11","b_11","b_11","b_11","b_11","b_11","b_11","b_11","b_11","b_11","b_11","b_11","b_11","b_11","b_11","b_12","b_12","b_12","b_12","b_12","b_12","b_12","b_12","b_12","b_12","b_12","b_12","b_13","b_13","b_13","b_13","b_13","b_13","b_13","b_13","b_13","b_13","b_13","b_14","b_14","b_14","b_14","b_14","b_14","b_14","b_14","b_14","b_15","b_15","b_15","b_15","b_15","b_15","b_15","b_15","b_15","b_16","b_16","b_16","b_16","b_16","b_16","b_16","b_17","b_17","b_17","b_17","b_17","b_17","b_17","b_17","b_17","b_17","b_17","b_18","b_18","b_18","b_18","b_18","b_18","b_18","b_18","b_18","b_19","b_19","b_19","b_19","b_19","b_19","b_19","b_20","b_20","b_20","b_20","b_20","b_20","b_20","b_21","b_21","b_21","b_21","b_22","b_22","b_22","b_22","b_22","c_1","c_1","c_1","c_1","c_1","c_1","c_1","c_1","c_1","c_1","c_1","c_1","c_1","c_2","c_2","c_2","c_2","c_2","c_2","c_2","c_2","c_2","c_2","c_2","c_3","c_3","c_3","c_3","c_3","c_3","c_3","c_3","c_3","c_3","c_4","c_4","c_4","c_4","c_4","c_4","c_4","c_4","c_4","c_4","c_4","c_5","c_5","c_5","c_5","c_5","c_5","c_5","c_5","c_5","c_5","c_5","c_6","c_6","c_6","c_6","c_7","c_7","c_7","c_7","c_7","c_7","c_7","c_7","c_7","c_7","c_7","c_8","c_8","c_8","c_8","c_8","c_8","c_9","c_9","c_9","c_9","c_10","c_10","c_10","c_10","c_10","c_11","c_11","c_11","c_11","c_11","c_11","c_11","c_11","c_11","c_11","c_12","c_12","c_13","c_13","c_13","c_13","c_13","c_13","c_13","c_14","c_14","c_14","c_14","c_14","c_14","c_15","c_15","c_15","c_15","c_16","c_16","c_17","c_17","c_18","c_18","c_18","c_18","c_19","c_19","c_19","c_19","c_20","c_21","c_22","c_23","c_24"],"to":["a_2","a_3","a_4","a_5","a_6","a_7","a_8","a_10","a_11","a_12","a_13","a_14","a_15","a_16","a_17","a_18","a_20","b_2","b_4","b_5","b_9","b_11","b_13","b_17","b_20","c_3","c_5","c_6","c_8","c_13","c_15","c_21","c_22","c_24","a_3","a_4","a_5","a_6","a_9","a_10","a_12","a_14","a_15","a_17","a_19","a_20","b_10","b_11","b_21","b_22","c_1","c_2","c_6","c_7","c_14","c_19","c_21","c_22","c_24","c_25","a_4","a_5","a_6","a_7","a_8","a_9","a_11","a_12","a_15","a_16","a_17","a_18","a_20","b_13","c_1","c_7","c_9","c_10","c_11","c_12","c_15","c_16","c_17","c_18","c_22","a_6","a_8","a_9","a_10","a_11","a_12","a_13","a_15","a_16","a_17","a_18","a_19","a_20","b_5","b_9","b_13","b_15","c_2","c_3","c_5","c_17","c_23","a_6","a_7","a_8","a_10","a_11","a_12","a_14","a_15","a_16","a_17","a_19","a_20","b_2","b_11","b_18","c_2","c_10","c_11","c_17","c_21","c_24","c_25","a_7","a_8","a_10","a_11","a_12","a_13","a_14","a_15","a_16","a_17","a_20","b_5","b_13","b_15","b_16","c_2","c_8","c_12","c_17","c_19","c_20","c_24","a_8","a_9","a_10","a_11","a_12","a_14","a_17","a_18","a_19","a_20","b_3","b_4","b_11","b_13","c_2","c_7","c_8","c_19","a_9","a_10","a_11","a_12","a_13","a_15","a_16","a_18","a_19","a_20","b_6","b_7","b_10","b_17","b_20","b_21","c_3","c_5","c_8","c_10","c_12","c_16","c_18","c_22","a_12","a_13","a_15","a_16","a_18","a_19","b_10","b_11","b_12","b_17","b_20","c_8","c_9","c_13","c_18","c_24","a_11","a_12","a_13","a_14","a_17","a_18","a_19","a_20","b_5","b_14","b_19","b_20","c_2","c_4","c_5","c_13","c_17","c_25","a_12","a_14","a_15","a_16","a_17","a_18","a_19","a_20","b_15","b_20","c_3","c_4","c_6","c_7","c_15","c_16","c_18","c_20","c_23","a_13","a_15","a_18","a_19","a_20","b_3","b_5","b_7","b_14","b_15","b_19","b_20","c_3","c_4","c_5","c_10","c_11","c_13","c_14","c_15","c_25","a_14","a_15","a_16","a_17","a_18","a_19","a_20","b_1","b_7","b_8","b_11","b_12","b_16","c_4","c_5","c_6","c_7","c_12","c_20","c_22","c_23","c_24","c_25","a_15","a_16","a_17","a_19","b_5","b_13","b_15","b_16","c_4","c_7","c_9","c_18","a_16","a_17","a_18","a_19","a_20","b_1","b_4","b_11","b_20","b_22","c_1","c_6","c_11","c_12","c_14","c_19","c_21","c_22","c_24","c_25","a_20","b_1","b_7","b_17","c_2","c_3","c_4","c_5","c_6","c_10","c_11","c_12","c_15","c_21","c_22","c_23","c_24","a_19","a_20","b_19","c_3","c_5","c_8","c_18","c_23","a_19","b_2","b_5","b_6","b_13","b_15","b_22","c_6","c_9","c_11","c_19","c_20","c_21","a_20","b_1","b_5","b_12","b_13","b_15","b_20","c_4","c_9","c_16","c_19","c_24","b_4","b_8","b_16","c_2","c_4","c_5","c_8","c_9","c_12","c_13","c_15","c_16","c_17","c_20","c_21","c_23","b_3","b_4","b_6","b_7","b_8","b_10","b_11","b_12","b_13","b_14","b_15","b_16","b_17","b_19","b_20","b_21","b_22","c_2","c_5","c_22","c_23","b_3","b_4","b_5","b_6","b_7","b_8","b_9","b_10","b_11","b_12","b_13","b_14","b_15","b_16","b_17","b_18","b_19","b_21","b_22","c_10","c_15","c_16","b_4","b_5","b_6","b_7","b_8","b_9","b_10","b_11","b_12","b_13","b_15","b_16","b_17","b_18","b_19","b_20","b_21","b_22","c_4","c_20","b_5","b_6","b_7","b_8","b_9","b_10","b_11","b_12","b_13","b_14","b_15","b_16","b_17","b_18","b_19","b_20","b_21","b_22","c_19","c_23","c_25","b_6","b_7","b_9","b_10","b_11","b_12","b_13","b_15","b_16","b_17","b_18","b_19","b_20","b_21","b_22","c_4","c_8","c_9","c_21","b_7","b_8","b_9","b_10","b_11","b_13","b_14","b_15","b_16","b_17","b_18","b_20","b_21","b_22","c_3","c_14","c_16","b_8","b_9","b_10","b_12","b_13","b_15","b_16","b_17","b_19","b_20","b_21","b_22","c_17","c_20","c_24","b_9","b_10","b_11","b_12","b_13","b_14","b_15","b_16","b_17","b_18","b_19","b_20","b_21","b_22","c_3","c_5","c_6","c_11","b_10","b_11","b_12","b_13","b_14","b_15","b_16","b_17","b_18","b_19","b_20","b_21","b_22","c_5","c_19","c_21","b_12","b_13","b_15","b_16","b_17","b_18","b_19","b_20","b_21","b_22","c_12","c_16","c_21","b_12","b_13","b_14","b_15","b_16","b_17","b_18","b_19","b_20","b_21","b_22","c_6","c_12","c_16","c_23","b_13","b_14","b_15","b_16","b_17","b_18","b_19","b_20","b_21","b_22","c_17","c_23","b_14","b_15","b_16","b_17","b_18","b_19","b_20","b_22","c_14","c_15","c_23","b_15","b_17","b_18","b_20","b_21","b_22","c_2","c_4","c_22","b_16","b_17","b_18","b_19","b_20","b_21","b_22","c_4","c_24","b_18","b_19","b_20","b_21","b_22","c_12","c_18","b_18","b_19","b_20","b_21","b_22","c_4","c_12","c_14","c_15","c_19","c_20","b_19","b_20","b_21","b_22","c_3","c_13","c_17","c_19","c_24","b_20","b_21","b_22","c_1","c_12","c_17","c_21","b_21","b_22","c_5","c_6","c_9","c_19","c_23","b_22","c_1","c_9","c_24","c_11","c_15","c_17","c_20","c_24","c_3","c_5","c_7","c_8","c_9","c_11","c_12","c_16","c_18","c_19","c_21","c_23","c_24","c_5","c_6","c_12","c_14","c_16","c_18","c_19","c_20","c_21","c_22","c_25","c_6","c_9","c_10","c_13","c_16","c_20","c_22","c_23","c_24","c_25","c_5","c_11","c_12","c_13","c_14","c_15","c_16","c_18","c_19","c_24","c_25","c_7","c_8","c_9","c_10","c_11","c_12","c_18","c_20","c_22","c_23","c_24","c_10","c_11","c_14","c_15","c_8","c_11","c_12","c_13","c_14","c_18","c_19","c_21","c_22","c_23","c_25","c_11","c_15","c_16","c_20","c_22","c_23","c_12","c_18","c_23","c_25","c_11","c_15","c_18","c_22","c_23","c_12","c_13","c_14","c_16","c_17","c_18","c_19","c_20","c_21","c_24","c_16","c_18","c_14","c_16","c_17","c_18","c_21","c_22","c_23","c_15","c_17","c_18","c_20","c_21","c_25","c_19","c_20","c_21","c_23","c_18","c_24","c_21","c_24","c_19","c_21","c_24","c_25","c_20","c_22","c_23","c_24","c_23","c_22","c_23","c_24","c_25"],"connections":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]},"nodes":{"id":["a_1","a_2","a_3","a_4","a_5","a_6","a_7","a_8","a_9","a_10","a_11","a_12","a_13","a_14","a_15","a_16","a_17","a_18","a_19","a_20","b_1","b_2","b_3","b_4","b_5","b_6","b_7","b_8","b_9","b_10","b_11","b_12","b_13","b_14","b_15","b_16","b_17","b_18","b_19","b_20","b_21","b_22","c_1","c_2","c_3","c_4","c_5","c_6","c_7","c_8","c_9","c_10","c_11","c_12","c_13","c_14","c_15","c_16","c_17","c_18","c_19","c_20","c_21","c_22","c_23","c_24","c_25"],"group":["a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","b","b","b","b","b","b","b","b","b","b","b","b","b","b","b","b","b","b","b","b","b","b","c","c","c","c","c","c","c","c","c","c","c","c","c","c","c","c","c","c","c","c","c","c","c","c","c"],"inferred":["0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37"]}},"type":"list","container":"svg","options":{"color_col":"group","shape_col":"inferred"},"script":"var d3Script = function(d3, r2d3, data, svg, width, height, options, theme, console) {\nthis.d3 = d3;\n\nsvg = d3.select(svg.node());\n/* R2D3 Source File:  /private/var/folders/d4/cbr0wtz50gb69vd8pqt65w0m0000gn/T/Rtmp9o7Zlz/temp_libpath1497522f3e178/sbmR/d3/network_viz.js */\n// !preview r2d3 data=sim_basic_block_network(3, 20), options = list(color_col = 'group', shape_col = 'type')\nsvg.attr(\"viewBox\", [0, 0, width, height]);\n\n// Get color and shape column names from options\nconst {color_col, shape_col} = options;\n\n// Clean up data into the node and link format that d3 needs\nconst links = HTMLWidgets.dataframeToD3(data.edges)\n  .map(function(edge){return({source: edge.from, target: edge.to})});\nconst nodes = HTMLWidgets.dataframeToD3(data.nodes);\n\n\n// If we're missing values for our aesthetic mapping columns,  fill them in with constant values.\nif(!nodes[0][color_col]){\n  nodes.forEach(function(node){node[color_col] = color_col});\n}\nif(!nodes[0][shape_col]){\n  nodes.forEach(function(node){node[shape_col] = shape_col});\n}\n\n// Color encodes the node's group\nconst Color = d3.scaleOrdinal(d3.schemeCategory10, unique(nodes.map(d => d[color_col])));\nconst color_node = node => Color(node[color_col]);\n\n// Shape encodes the node's type\nconst Shape = d3.scaleOrdinal()\n  .range(d3.symbols)\n  .domain(unique(nodes.map(d => d[shape_col])));\nconst draw_shape = node => d3.symbol().size(150)\n  .type(Shape(node[shape_col]))();\n\n\nconst padding = 15;\nconst X = d3.scaleLinear()\n  .range([padding, width-padding]);\n\nconst Y = d3.scaleLinear()\n  .range([padding, height-padding]);\n\n// Setup the simulation\nconst simulation = d3.forceSimulation(nodes)\n      .force(\"link\", d3.forceLink(links).id(d => d.id))\n      .force(\"charge\", d3.forceManyBody())\n      .force(\"center\", d3.forceCenter(width / 2, height / 2));\n\nlet not_being_dragged = true;\n\n// Setup the node and link visual components\nconst link = svg.append(\"g\")\n  .attr(\"stroke\", \"#999\")\n  .attr(\"stroke-opacity\", 0.6)\n  .selectAll(\"line\")\n  .data(links)\n  .enter().append(\"line\")\n  .attr(\"stroke-width\", 1);\n\nconst node = svg.append(\"g\")\n  .attr(\"stroke\", \"#fff\")\n  .selectAll(\"path.node\")\n  .data(nodes)\n  .enter().append('path')\n  .classed('node', true)\n  .attr('fill', color_node)\n  .attr('d', draw_shape)\n  .call(drag(simulation));\n\n// Kickoff simulation\nsimulation.on(\"tick\", () => {\n\n if(not_being_dragged){\n   X.domain(d3.extent(nodes.map(d => d.x)));\n   Y.domain(d3.extent(nodes.map(d => d.y)));\n }\n\n\n  link\n    .attr(\"x1\", d => X(d.source.x))\n    .attr(\"x2\", d => X(d.target.x))\n    .attr(\"y1\", d => Y(d.source.y))\n    .attr(\"y2\", d => Y(d.target.y));\n\n  node.attr('transform', d => `translate(${X(d.x)}, ${Y(d.y)})`);\n});\n\n\nfunction drag(simulation){\n  function dragstarted(d) {\n    if (!d3.event.active) simulation.alphaTarget(0.3).restart();\n    d.fx = d.x;\n    d.fy = d.y;\n    not_being_dragged = false;\n  }\n\n  function dragged(d) {\n    d.fx = d3.event.x;\n    d.fy = d3.event.y;\n  }\n\n  function dragended(d) {\n    if (!d3.event.active) simulation.alphaTarget(0);\n    d.fx = null;\n    d.fy = null;\n    not_being_dragged = true;\n  }\n\n  return d3.drag()\n      .on(\"start\", dragstarted)\n      .on(\"drag\", dragged)\n      .on(\"end\", dragended);\n}\n\n\nfunction unique (vals){\n  return [...new Set(vals)];\n}\n\n\n};","style":null,"version":5,"theme":{"default":{"background":"#FFFFFF","foreground":"#000000"},"runtime":null},"useShadow":true},"evals":[],"jsHooks":[]}</script><p>It appears that our grouping is working decently well as the cluster of nodes that represent the orange group seem to be made up of the same types of shapes whereas the other groups are more mixed as we would expect.</p>
</div>
</div>
<div id="sampling-from-the-posterior" class="section level2">
<h2 class="hasAnchor">
<a href="#sampling-from-the-posterior" class="anchor"></a>Sampling from the posterior</h2>
<p>Now that we have our model in a decent starting place we can initiate the MCMC sampling. We will start by doing 100 sweeps to see if our model shape has stabalized at all.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1">num_sweeps &lt;-<span class="st"> </span><span class="dv">1000</span></a>
<a class="sourceLine" id="cb10-2" data-line-number="2"></a>
<a class="sourceLine" id="cb10-3" data-line-number="3">sweep_results_to_df &lt;-<span class="st"> </span><span class="cf">function</span>(sweep_results, <span class="dt">label =</span> <span class="st">'results'</span>){</a>
<a class="sourceLine" id="cb10-4" data-line-number="4">  sweep_results <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb10-5" data-line-number="5"><span class="st">    </span><span class="kw">map_dfr</span>(<span class="op">~</span><span class="kw">tibble</span>(</a>
<a class="sourceLine" id="cb10-6" data-line-number="6">      <span class="dt">n_moved =</span> <span class="kw"><a href="https://rdrr.io/r/base/length.html">length</a></span>(.<span class="op">$</span>nodes_moved),</a>
<a class="sourceLine" id="cb10-7" data-line-number="7">      <span class="dt">entropy_delta =</span> .<span class="op">$</span>entropy_delta</a>
<a class="sourceLine" id="cb10-8" data-line-number="8">    )) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb10-9" data-line-number="9"><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">sweep =</span> <span class="dv">1</span><span class="op">:</span><span class="kw">n</span>()) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb10-10" data-line-number="10"><span class="st">    </span><span class="kw">pivot_longer</span>(<span class="op">-</span>sweep, <span class="dt">names_to =</span> <span class="st">'stat'</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb10-11" data-line-number="11"><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">label =</span> label)</a>
<a class="sourceLine" id="cb10-12" data-line-number="12">}</a>
<a class="sourceLine" id="cb10-13" data-line-number="13"></a>
<a class="sourceLine" id="cb10-14" data-line-number="14">sweep_results &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span>num_sweeps <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb10-15" data-line-number="15"><span class="st">  </span>purrr<span class="op">::</span><span class="kw"><a href="https://purrr.tidyverse.org/reference/map.html">map</a></span>(<span class="op">~</span><span class="kw"><a href="../reference/mcmc_sweep.html">mcmc_sweep</a></span>(my_sbm)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb10-16" data-line-number="16"><span class="st">  </span><span class="kw">sweep_results_to_df</span>(<span class="dt">label =</span> <span class="st">'eps = 0.1'</span>)</a>
<a class="sourceLine" id="cb10-17" data-line-number="17"></a>
<a class="sourceLine" id="cb10-18" data-line-number="18"></a>
<a class="sourceLine" id="cb10-19" data-line-number="19">plot_sweep_results &lt;-<span class="st"> </span><span class="cf">function</span>(sweep_results_df){</a>
<a class="sourceLine" id="cb10-20" data-line-number="20">   sweep_results_df <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb10-21" data-line-number="21"><span class="st">    </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> sweep, <span class="dt">y =</span> value)) <span class="op">+</span></a>
<a class="sourceLine" id="cb10-22" data-line-number="22"><span class="st">    </span><span class="kw">geom_line</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb10-23" data-line-number="23"><span class="st">    </span><span class="kw">facet_grid</span>(stat<span class="op">~</span>., <span class="dt">scales =</span> <span class="st">'free_y'</span>)</a>
<a class="sourceLine" id="cb10-24" data-line-number="24">}</a>
<a class="sourceLine" id="cb10-25" data-line-number="25"></a>
<a class="sourceLine" id="cb10-26" data-line-number="26">sweep_results <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb10-27" data-line-number="27"><span class="st">  </span><span class="kw">plot_sweep_results</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb10-28" data-line-number="28"><span class="st">  </span><span class="kw">labs</span>(</a>
<a class="sourceLine" id="cb10-29" data-line-number="29">    <span class="dt">title =</span> glue<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/glue/man/glue.html">glue</a></span>(<span class="st">'Result of {num_sweeps} MCMC sweeps'</span>),</a>
<a class="sourceLine" id="cb10-30" data-line-number="30">    <span class="dt">subtitle =</span> <span class="st">"Entropy Delta of sweep and number of nodes moved for sweep"</span></a>
<a class="sourceLine" id="cb10-31" data-line-number="31">  )</a></code></pre></div>
<p><img src="sampling_from_posterior_files/figure-html/unnamed-chunk-11-1.png" width="672"></p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1">nodes_w_inferred_group &lt;-<span class="st"> </span>my_sbm <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb11-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/get_state.html">get_state</a></span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb11-3" data-line-number="3"><span class="st">  </span><span class="kw">select</span>(id, parent) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb11-4" data-line-number="4"><span class="st">  </span><span class="kw">right_join</span>(network<span class="op">$</span>nodes, <span class="dt">by =</span> <span class="st">'id'</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb11-5" data-line-number="5"><span class="st">  </span><span class="kw">rename</span>(<span class="dt">inferred =</span> parent)</a>
<a class="sourceLine" id="cb11-6" data-line-number="6"></a>
<a class="sourceLine" id="cb11-7" data-line-number="7"><span class="kw"><a href="../reference/visualize_network.html">visualize_network</a></span>(<span class="dt">edges =</span> network<span class="op">$</span>edges, </a>
<a class="sourceLine" id="cb11-8" data-line-number="8">                  <span class="dt">nodes =</span> nodes_w_inferred_group, </a>
<a class="sourceLine" id="cb11-9" data-line-number="9">                  <span class="dt">node_color_col =</span> <span class="st">'group'</span>, </a>
<a class="sourceLine" id="cb11-10" data-line-number="10">                  <span class="dt">node_shape_col =</span> <span class="st">'inferred'</span>,</a>
<a class="sourceLine" id="cb11-11" data-line-number="11">                  <span class="dt">width =</span> <span class="st">'100%'</span>)</a></code></pre></div>
<div id="htmlwidget-abf3dcab2973c3f06ef6" style="width:100%;height:432.632880098888px;" class="r2d3 html-widget"></div>
<script type="application/json" data-for="htmlwidget-abf3dcab2973c3f06ef6">{"x":{"data":{"edges":{"from":["a_1","a_1","a_1","a_1","a_1","a_1","a_1","a_1","a_1","a_1","a_1","a_1","a_1","a_1","a_1","a_1","a_1","a_1","a_1","a_1","a_1","a_1","a_1","a_1","a_1","a_1","a_1","a_1","a_1","a_1","a_1","a_1","a_1","a_1","a_2","a_2","a_2","a_2","a_2","a_2","a_2","a_2","a_2","a_2","a_2","a_2","a_2","a_2","a_2","a_2","a_2","a_2","a_2","a_2","a_2","a_2","a_2","a_2","a_2","a_2","a_3","a_3","a_3","a_3","a_3","a_3","a_3","a_3","a_3","a_3","a_3","a_3","a_3","a_3","a_3","a_3","a_3","a_3","a_3","a_3","a_3","a_3","a_3","a_3","a_3","a_4","a_4","a_4","a_4","a_4","a_4","a_4","a_4","a_4","a_4","a_4","a_4","a_4","a_4","a_4","a_4","a_4","a_4","a_4","a_4","a_4","a_4","a_5","a_5","a_5","a_5","a_5","a_5","a_5","a_5","a_5","a_5","a_5","a_5","a_5","a_5","a_5","a_5","a_5","a_5","a_5","a_5","a_5","a_5","a_6","a_6","a_6","a_6","a_6","a_6","a_6","a_6","a_6","a_6","a_6","a_6","a_6","a_6","a_6","a_6","a_6","a_6","a_6","a_6","a_6","a_6","a_7","a_7","a_7","a_7","a_7","a_7","a_7","a_7","a_7","a_7","a_7","a_7","a_7","a_7","a_7","a_7","a_7","a_7","a_8","a_8","a_8","a_8","a_8","a_8","a_8","a_8","a_8","a_8","a_8","a_8","a_8","a_8","a_8","a_8","a_8","a_8","a_8","a_8","a_8","a_8","a_8","a_8","a_9","a_9","a_9","a_9","a_9","a_9","a_9","a_9","a_9","a_9","a_9","a_9","a_9","a_9","a_9","a_9","a_10","a_10","a_10","a_10","a_10","a_10","a_10","a_10","a_10","a_10","a_10","a_10","a_10","a_10","a_10","a_10","a_10","a_10","a_11","a_11","a_11","a_11","a_11","a_11","a_11","a_11","a_11","a_11","a_11","a_11","a_11","a_11","a_11","a_11","a_11","a_11","a_11","a_12","a_12","a_12","a_12","a_12","a_12","a_12","a_12","a_12","a_12","a_12","a_12","a_12","a_12","a_12","a_12","a_12","a_12","a_12","a_12","a_12","a_13","a_13","a_13","a_13","a_13","a_13","a_13","a_13","a_13","a_13","a_13","a_13","a_13","a_13","a_13","a_13","a_13","a_13","a_13","a_13","a_13","a_13","a_13","a_14","a_14","a_14","a_14","a_14","a_14","a_14","a_14","a_14","a_14","a_14","a_14","a_15","a_15","a_15","a_15","a_15","a_15","a_15","a_15","a_15","a_15","a_15","a_15","a_15","a_15","a_15","a_15","a_15","a_15","a_15","a_15","a_16","a_16","a_16","a_16","a_16","a_16","a_16","a_16","a_16","a_16","a_16","a_16","a_16","a_16","a_16","a_16","a_16","a_17","a_17","a_17","a_17","a_17","a_17","a_17","a_17","a_18","a_18","a_18","a_18","a_18","a_18","a_18","a_18","a_18","a_18","a_18","a_18","a_18","a_19","a_19","a_19","a_19","a_19","a_19","a_19","a_19","a_19","a_19","a_19","a_19","a_20","a_20","a_20","a_20","a_20","a_20","a_20","a_20","a_20","a_20","a_20","a_20","a_20","a_20","a_20","a_20","b_1","b_1","b_1","b_1","b_1","b_1","b_1","b_1","b_1","b_1","b_1","b_1","b_1","b_1","b_1","b_1","b_1","b_1","b_1","b_1","b_1","b_2","b_2","b_2","b_2","b_2","b_2","b_2","b_2","b_2","b_2","b_2","b_2","b_2","b_2","b_2","b_2","b_2","b_2","b_2","b_2","b_2","b_2","b_3","b_3","b_3","b_3","b_3","b_3","b_3","b_3","b_3","b_3","b_3","b_3","b_3","b_3","b_3","b_3","b_3","b_3","b_3","b_3","b_4","b_4","b_4","b_4","b_4","b_4","b_4","b_4","b_4","b_4","b_4","b_4","b_4","b_4","b_4","b_4","b_4","b_4","b_4","b_4","b_4","b_5","b_5","b_5","b_5","b_5","b_5","b_5","b_5","b_5","b_5","b_5","b_5","b_5","b_5","b_5","b_5","b_5","b_5","b_5","b_6","b_6","b_6","b_6","b_6","b_6","b_6","b_6","b_6","b_6","b_6","b_6","b_6","b_6","b_6","b_6","b_6","b_7","b_7","b_7","b_7","b_7","b_7","b_7","b_7","b_7","b_7","b_7","b_7","b_7","b_7","b_7","b_8","b_8","b_8","b_8","b_8","b_8","b_8","b_8","b_8","b_8","b_8","b_8","b_8","b_8","b_8","b_8","b_8","b_8","b_9","b_9","b_9","b_9","b_9","b_9","b_9","b_9","b_9","b_9","b_9","b_9","b_9","b_9","b_9","b_9","b_10","b_10","b_10","b_10","b_10","b_10","b_10","b_10","b_10","b_10","b_10","b_10","b_10","b_11","b_11","b_11","b_11","b_11","b_11","b_11","b_11","b_11","b_11","b_11","b_11","b_11","b_11","b_11","b_12","b_12","b_12","b_12","b_12","b_12","b_12","b_12","b_12","b_12","b_12","b_12","b_13","b_13","b_13","b_13","b_13","b_13","b_13","b_13","b_13","b_13","b_13","b_14","b_14","b_14","b_14","b_14","b_14","b_14","b_14","b_14","b_15","b_15","b_15","b_15","b_15","b_15","b_15","b_15","b_15","b_16","b_16","b_16","b_16","b_16","b_16","b_16","b_17","b_17","b_17","b_17","b_17","b_17","b_17","b_17","b_17","b_17","b_17","b_18","b_18","b_18","b_18","b_18","b_18","b_18","b_18","b_18","b_19","b_19","b_19","b_19","b_19","b_19","b_19","b_20","b_20","b_20","b_20","b_20","b_20","b_20","b_21","b_21","b_21","b_21","b_22","b_22","b_22","b_22","b_22","c_1","c_1","c_1","c_1","c_1","c_1","c_1","c_1","c_1","c_1","c_1","c_1","c_1","c_2","c_2","c_2","c_2","c_2","c_2","c_2","c_2","c_2","c_2","c_2","c_3","c_3","c_3","c_3","c_3","c_3","c_3","c_3","c_3","c_3","c_4","c_4","c_4","c_4","c_4","c_4","c_4","c_4","c_4","c_4","c_4","c_5","c_5","c_5","c_5","c_5","c_5","c_5","c_5","c_5","c_5","c_5","c_6","c_6","c_6","c_6","c_7","c_7","c_7","c_7","c_7","c_7","c_7","c_7","c_7","c_7","c_7","c_8","c_8","c_8","c_8","c_8","c_8","c_9","c_9","c_9","c_9","c_10","c_10","c_10","c_10","c_10","c_11","c_11","c_11","c_11","c_11","c_11","c_11","c_11","c_11","c_11","c_12","c_12","c_13","c_13","c_13","c_13","c_13","c_13","c_13","c_14","c_14","c_14","c_14","c_14","c_14","c_15","c_15","c_15","c_15","c_16","c_16","c_17","c_17","c_18","c_18","c_18","c_18","c_19","c_19","c_19","c_19","c_20","c_21","c_22","c_23","c_24"],"to":["a_2","a_3","a_4","a_5","a_6","a_7","a_8","a_10","a_11","a_12","a_13","a_14","a_15","a_16","a_17","a_18","a_20","b_2","b_4","b_5","b_9","b_11","b_13","b_17","b_20","c_3","c_5","c_6","c_8","c_13","c_15","c_21","c_22","c_24","a_3","a_4","a_5","a_6","a_9","a_10","a_12","a_14","a_15","a_17","a_19","a_20","b_10","b_11","b_21","b_22","c_1","c_2","c_6","c_7","c_14","c_19","c_21","c_22","c_24","c_25","a_4","a_5","a_6","a_7","a_8","a_9","a_11","a_12","a_15","a_16","a_17","a_18","a_20","b_13","c_1","c_7","c_9","c_10","c_11","c_12","c_15","c_16","c_17","c_18","c_22","a_6","a_8","a_9","a_10","a_11","a_12","a_13","a_15","a_16","a_17","a_18","a_19","a_20","b_5","b_9","b_13","b_15","c_2","c_3","c_5","c_17","c_23","a_6","a_7","a_8","a_10","a_11","a_12","a_14","a_15","a_16","a_17","a_19","a_20","b_2","b_11","b_18","c_2","c_10","c_11","c_17","c_21","c_24","c_25","a_7","a_8","a_10","a_11","a_12","a_13","a_14","a_15","a_16","a_17","a_20","b_5","b_13","b_15","b_16","c_2","c_8","c_12","c_17","c_19","c_20","c_24","a_8","a_9","a_10","a_11","a_12","a_14","a_17","a_18","a_19","a_20","b_3","b_4","b_11","b_13","c_2","c_7","c_8","c_19","a_9","a_10","a_11","a_12","a_13","a_15","a_16","a_18","a_19","a_20","b_6","b_7","b_10","b_17","b_20","b_21","c_3","c_5","c_8","c_10","c_12","c_16","c_18","c_22","a_12","a_13","a_15","a_16","a_18","a_19","b_10","b_11","b_12","b_17","b_20","c_8","c_9","c_13","c_18","c_24","a_11","a_12","a_13","a_14","a_17","a_18","a_19","a_20","b_5","b_14","b_19","b_20","c_2","c_4","c_5","c_13","c_17","c_25","a_12","a_14","a_15","a_16","a_17","a_18","a_19","a_20","b_15","b_20","c_3","c_4","c_6","c_7","c_15","c_16","c_18","c_20","c_23","a_13","a_15","a_18","a_19","a_20","b_3","b_5","b_7","b_14","b_15","b_19","b_20","c_3","c_4","c_5","c_10","c_11","c_13","c_14","c_15","c_25","a_14","a_15","a_16","a_17","a_18","a_19","a_20","b_1","b_7","b_8","b_11","b_12","b_16","c_4","c_5","c_6","c_7","c_12","c_20","c_22","c_23","c_24","c_25","a_15","a_16","a_17","a_19","b_5","b_13","b_15","b_16","c_4","c_7","c_9","c_18","a_16","a_17","a_18","a_19","a_20","b_1","b_4","b_11","b_20","b_22","c_1","c_6","c_11","c_12","c_14","c_19","c_21","c_22","c_24","c_25","a_20","b_1","b_7","b_17","c_2","c_3","c_4","c_5","c_6","c_10","c_11","c_12","c_15","c_21","c_22","c_23","c_24","a_19","a_20","b_19","c_3","c_5","c_8","c_18","c_23","a_19","b_2","b_5","b_6","b_13","b_15","b_22","c_6","c_9","c_11","c_19","c_20","c_21","a_20","b_1","b_5","b_12","b_13","b_15","b_20","c_4","c_9","c_16","c_19","c_24","b_4","b_8","b_16","c_2","c_4","c_5","c_8","c_9","c_12","c_13","c_15","c_16","c_17","c_20","c_21","c_23","b_3","b_4","b_6","b_7","b_8","b_10","b_11","b_12","b_13","b_14","b_15","b_16","b_17","b_19","b_20","b_21","b_22","c_2","c_5","c_22","c_23","b_3","b_4","b_5","b_6","b_7","b_8","b_9","b_10","b_11","b_12","b_13","b_14","b_15","b_16","b_17","b_18","b_19","b_21","b_22","c_10","c_15","c_16","b_4","b_5","b_6","b_7","b_8","b_9","b_10","b_11","b_12","b_13","b_15","b_16","b_17","b_18","b_19","b_20","b_21","b_22","c_4","c_20","b_5","b_6","b_7","b_8","b_9","b_10","b_11","b_12","b_13","b_14","b_15","b_16","b_17","b_18","b_19","b_20","b_21","b_22","c_19","c_23","c_25","b_6","b_7","b_9","b_10","b_11","b_12","b_13","b_15","b_16","b_17","b_18","b_19","b_20","b_21","b_22","c_4","c_8","c_9","c_21","b_7","b_8","b_9","b_10","b_11","b_13","b_14","b_15","b_16","b_17","b_18","b_20","b_21","b_22","c_3","c_14","c_16","b_8","b_9","b_10","b_12","b_13","b_15","b_16","b_17","b_19","b_20","b_21","b_22","c_17","c_20","c_24","b_9","b_10","b_11","b_12","b_13","b_14","b_15","b_16","b_17","b_18","b_19","b_20","b_21","b_22","c_3","c_5","c_6","c_11","b_10","b_11","b_12","b_13","b_14","b_15","b_16","b_17","b_18","b_19","b_20","b_21","b_22","c_5","c_19","c_21","b_12","b_13","b_15","b_16","b_17","b_18","b_19","b_20","b_21","b_22","c_12","c_16","c_21","b_12","b_13","b_14","b_15","b_16","b_17","b_18","b_19","b_20","b_21","b_22","c_6","c_12","c_16","c_23","b_13","b_14","b_15","b_16","b_17","b_18","b_19","b_20","b_21","b_22","c_17","c_23","b_14","b_15","b_16","b_17","b_18","b_19","b_20","b_22","c_14","c_15","c_23","b_15","b_17","b_18","b_20","b_21","b_22","c_2","c_4","c_22","b_16","b_17","b_18","b_19","b_20","b_21","b_22","c_4","c_24","b_18","b_19","b_20","b_21","b_22","c_12","c_18","b_18","b_19","b_20","b_21","b_22","c_4","c_12","c_14","c_15","c_19","c_20","b_19","b_20","b_21","b_22","c_3","c_13","c_17","c_19","c_24","b_20","b_21","b_22","c_1","c_12","c_17","c_21","b_21","b_22","c_5","c_6","c_9","c_19","c_23","b_22","c_1","c_9","c_24","c_11","c_15","c_17","c_20","c_24","c_3","c_5","c_7","c_8","c_9","c_11","c_12","c_16","c_18","c_19","c_21","c_23","c_24","c_5","c_6","c_12","c_14","c_16","c_18","c_19","c_20","c_21","c_22","c_25","c_6","c_9","c_10","c_13","c_16","c_20","c_22","c_23","c_24","c_25","c_5","c_11","c_12","c_13","c_14","c_15","c_16","c_18","c_19","c_24","c_25","c_7","c_8","c_9","c_10","c_11","c_12","c_18","c_20","c_22","c_23","c_24","c_10","c_11","c_14","c_15","c_8","c_11","c_12","c_13","c_14","c_18","c_19","c_21","c_22","c_23","c_25","c_11","c_15","c_16","c_20","c_22","c_23","c_12","c_18","c_23","c_25","c_11","c_15","c_18","c_22","c_23","c_12","c_13","c_14","c_16","c_17","c_18","c_19","c_20","c_21","c_24","c_16","c_18","c_14","c_16","c_17","c_18","c_21","c_22","c_23","c_15","c_17","c_18","c_20","c_21","c_25","c_19","c_20","c_21","c_23","c_18","c_24","c_21","c_24","c_19","c_21","c_24","c_25","c_20","c_22","c_23","c_24","c_23","c_22","c_23","c_24","c_25"],"connections":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]},"nodes":{"id":["a_1","a_2","a_3","a_4","a_5","a_6","a_7","a_8","a_9","a_10","a_11","a_12","a_13","a_14","a_15","a_16","a_17","a_18","a_19","a_20","b_1","b_2","b_3","b_4","b_5","b_6","b_7","b_8","b_9","b_10","b_11","b_12","b_13","b_14","b_15","b_16","b_17","b_18","b_19","b_20","b_21","b_22","c_1","c_2","c_3","c_4","c_5","c_6","c_7","c_8","c_9","c_10","c_11","c_12","c_13","c_14","c_15","c_16","c_17","c_18","c_19","c_20","c_21","c_22","c_23","c_24","c_25"],"inferred":["0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37","0-1_37"],"group":["a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","a","b","b","b","b","b","b","b","b","b","b","b","b","b","b","b","b","b","b","b","b","b","b","c","c","c","c","c","c","c","c","c","c","c","c","c","c","c","c","c","c","c","c","c","c","c","c","c"]}},"type":"list","container":"svg","options":{"color_col":"group","shape_col":"inferred"},"script":"var d3Script = function(d3, r2d3, data, svg, width, height, options, theme, console) {\nthis.d3 = d3;\n\nsvg = d3.select(svg.node());\n/* R2D3 Source File:  /private/var/folders/d4/cbr0wtz50gb69vd8pqt65w0m0000gn/T/Rtmp9o7Zlz/temp_libpath1497522f3e178/sbmR/d3/network_viz.js */\n// !preview r2d3 data=sim_basic_block_network(3, 20), options = list(color_col = 'group', shape_col = 'type')\nsvg.attr(\"viewBox\", [0, 0, width, height]);\n\n// Get color and shape column names from options\nconst {color_col, shape_col} = options;\n\n// Clean up data into the node and link format that d3 needs\nconst links = HTMLWidgets.dataframeToD3(data.edges)\n  .map(function(edge){return({source: edge.from, target: edge.to})});\nconst nodes = HTMLWidgets.dataframeToD3(data.nodes);\n\n\n// If we're missing values for our aesthetic mapping columns,  fill them in with constant values.\nif(!nodes[0][color_col]){\n  nodes.forEach(function(node){node[color_col] = color_col});\n}\nif(!nodes[0][shape_col]){\n  nodes.forEach(function(node){node[shape_col] = shape_col});\n}\n\n// Color encodes the node's group\nconst Color = d3.scaleOrdinal(d3.schemeCategory10, unique(nodes.map(d => d[color_col])));\nconst color_node = node => Color(node[color_col]);\n\n// Shape encodes the node's type\nconst Shape = d3.scaleOrdinal()\n  .range(d3.symbols)\n  .domain(unique(nodes.map(d => d[shape_col])));\nconst draw_shape = node => d3.symbol().size(150)\n  .type(Shape(node[shape_col]))();\n\n\nconst padding = 15;\nconst X = d3.scaleLinear()\n  .range([padding, width-padding]);\n\nconst Y = d3.scaleLinear()\n  .range([padding, height-padding]);\n\n// Setup the simulation\nconst simulation = d3.forceSimulation(nodes)\n      .force(\"link\", d3.forceLink(links).id(d => d.id))\n      .force(\"charge\", d3.forceManyBody())\n      .force(\"center\", d3.forceCenter(width / 2, height / 2));\n\nlet not_being_dragged = true;\n\n// Setup the node and link visual components\nconst link = svg.append(\"g\")\n  .attr(\"stroke\", \"#999\")\n  .attr(\"stroke-opacity\", 0.6)\n  .selectAll(\"line\")\n  .data(links)\n  .enter().append(\"line\")\n  .attr(\"stroke-width\", 1);\n\nconst node = svg.append(\"g\")\n  .attr(\"stroke\", \"#fff\")\n  .selectAll(\"path.node\")\n  .data(nodes)\n  .enter().append('path')\n  .classed('node', true)\n  .attr('fill', color_node)\n  .attr('d', draw_shape)\n  .call(drag(simulation));\n\n// Kickoff simulation\nsimulation.on(\"tick\", () => {\n\n if(not_being_dragged){\n   X.domain(d3.extent(nodes.map(d => d.x)));\n   Y.domain(d3.extent(nodes.map(d => d.y)));\n }\n\n\n  link\n    .attr(\"x1\", d => X(d.source.x))\n    .attr(\"x2\", d => X(d.target.x))\n    .attr(\"y1\", d => Y(d.source.y))\n    .attr(\"y2\", d => Y(d.target.y));\n\n  node.attr('transform', d => `translate(${X(d.x)}, ${Y(d.y)})`);\n});\n\n\nfunction drag(simulation){\n  function dragstarted(d) {\n    if (!d3.event.active) simulation.alphaTarget(0.3).restart();\n    d.fx = d.x;\n    d.fy = d.y;\n    not_being_dragged = false;\n  }\n\n  function dragged(d) {\n    d.fx = d3.event.x;\n    d.fy = d3.event.y;\n  }\n\n  function dragended(d) {\n    if (!d3.event.active) simulation.alphaTarget(0);\n    d.fx = null;\n    d.fy = null;\n    not_being_dragged = true;\n  }\n\n  return d3.drag()\n      .on(\"start\", dragstarted)\n      .on(\"drag\", dragged)\n      .on(\"end\", dragended);\n}\n\n\nfunction unique (vals){\n  return [...new Set(vals)];\n}\n\n\n};","style":null,"version":5,"theme":{"default":{"background":"#FFFFFF","foreground":"#000000"},"runtime":null},"useShadow":true},"evals":[],"jsHooks":[]}</script><p>We can tweak the results MCMC sweeps by adjusting two parameters.</p>
<ol style="list-style-type: decimal">
<li>
<code>EPS</code> or ‘epsilon’ - This controls how random the moves proposed are. The higher epsilon the more random the moves will be. It’s like adding a constant to all the nodes probability of being chosen as a proposed move. As the constant gets higher it starts to overpower the data. This value can be set when initializing the network with <code><a href="../reference/create_sbm.html">create_sbm(eps = ...)</a></code> or modified post creation by targeting the sbm class value of <code>EPS</code>.</li>
<li>
<code>beta</code> - This is an ‘inverse temperature parameter’ that effects the probability of accepting a move. The lower this value the less important the move’s impact on model entropy is to its being chosen. This value is passed to the <code><a href="../reference/mcmc_sweep.html">mcmc_sweep()</a></code> function.</li>
</ol>
<p>Let’s first repeat another 1000 sweeps with a lower epsilon. We will recreate our model from the data and then reinitialize it to the collapsed state choice.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1"><span class="co"># Re-initialize network with new epsilon (old epsilon was 0.1) and reload the collapsed state</span></a>
<a class="sourceLine" id="cb12-2" data-line-number="2">lower_eps &lt;-<span class="st"> </span><span class="fl">0.005</span></a>
<a class="sourceLine" id="cb12-3" data-line-number="3">my_sbm &lt;-<span class="st"> </span><span class="kw"><a href="../reference/create_sbm.html">create_sbm</a></span>(network, <span class="dt">eps =</span> lower_eps) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb12-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="../reference/choose_best_collapse_state.html">choose_best_collapse_state</a></span>(collapse_results, <span class="dt">heuristic =</span> <span class="st">'lowest'</span>)</a>
<a class="sourceLine" id="cb12-5" data-line-number="5"></a>
<a class="sourceLine" id="cb12-6" data-line-number="6"><span class="co"># Run our mcmc sweeps again</span></a>
<a class="sourceLine" id="cb12-7" data-line-number="7">sweep_results_lower_eps &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span>num_sweeps <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb12-8" data-line-number="8"><span class="st">  </span>purrr<span class="op">::</span><span class="kw"><a href="https://purrr.tidyverse.org/reference/map.html">map</a></span>(<span class="op">~</span><span class="kw"><a href="../reference/mcmc_sweep.html">mcmc_sweep</a></span>(my_sbm)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb12-9" data-line-number="9"><span class="st">  </span><span class="kw">sweep_results_to_df</span>(<span class="dt">label =</span> <span class="kw"><a href="https://rdrr.io/pkg/glue/man/glue.html">glue</a></span>(<span class="st">'eps = {lower_eps}'</span>))</a>
<a class="sourceLine" id="cb12-10" data-line-number="10"></a>
<a class="sourceLine" id="cb12-11" data-line-number="11">sweep_results_lower_eps <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb12-12" data-line-number="12"><span class="st">  </span><span class="kw">plot_sweep_results</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb12-13" data-line-number="13"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> glue<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/glue/man/glue.html">glue</a></span>(<span class="st">'Result of {num_sweeps} MCMC sweeps w/ eps = {lower_eps}'</span>))</a></code></pre></div>
<p><img src="sampling_from_posterior_files/figure-html/unnamed-chunk-13-1.png" width="672"></p>
<div id="comparing-samples" class="section level3">
<h3 class="hasAnchor">
<a href="#comparing-samples" class="anchor"></a>Comparing samples</h3>
<p>Now we can put the two sweep runs side-by-side to see how they compare. We see that on average the results of the lower epsilon value are more stable, which intuitively makes sense as the model won’t try too many crazy proposals.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="kw">bind_rows</span>(</a>
<a class="sourceLine" id="cb13-2" data-line-number="2">  sweep_results,</a>
<a class="sourceLine" id="cb13-3" data-line-number="3">  sweep_results_lower_eps</a>
<a class="sourceLine" id="cb13-4" data-line-number="4">) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb13-5" data-line-number="5"><span class="st">  </span><span class="kw">plot_sweep_results</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb13-6" data-line-number="6"><span class="st">  </span><span class="kw">facet_grid</span>(stat<span class="op">~</span>label, <span class="dt">scales =</span> <span class="st">'free_y'</span>)</a>
<a class="sourceLine" id="cb13-7" data-line-number="7"><span class="co">#&gt; Warning in bind_rows_(x, .id): Vectorizing 'glue' elements may not preserve</span></a>
<a class="sourceLine" id="cb13-8" data-line-number="8"><span class="co">#&gt; their attributes</span></a></code></pre></div>
<p><img src="sampling_from_posterior_files/figure-html/unnamed-chunk-14-1.png" width="672"></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#setting-up-network-structure">Setting up network structure</a></li>
      <li><a href="#setting-up-sbm">Setting up SBM</a></li>
      <li><a href="#sampling-from-the-posterior">Sampling from the posterior</a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Nick Strayer.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
